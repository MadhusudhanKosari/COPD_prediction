<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Understanding COPD | BreatheEasy</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Navigation -->
    <header class="header">
        <div class="container">
            <div class="logo">
                <i class="fas fa-lungs"></i>
                <span>BreatheWise</span>
            </div>
            <nav class="navbar">
                <ul>
                    <li><a href="../index.html" class="nav-link"><i class="fas fa-home"></i> Home</a></li>
                    <li><a href="../index.html#predict" class="nav-link"><i class="fas fa-check-circle"></i>Predict COPD</a></li>
                    <li><a href="../index.html#contact" class="nav-link"><i class="fas fa-envelope"></i> Contact</a></li>
                </ul>            </nav>
            <div class="mobile-menu">
                <i class="fas fa-bars"></i>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero-info">
        <div class="container">
            <h1>Understanding COPD</h1>
            <p>Your comprehensive guide to Chronic Obstructive Pulmonary Disease</p>
            <div class="hero-buttons">
                <a href="#what-is" class="btn primary"><i class="fas fa-arrow-down"></i> Learn More</a>
                <a href="../index.html#predict" class="btn secondary">Check Your Risk</a>
            </div>
        </div>
    </section>

    <!-- Main Content -->
    <main class="container">
        <!-- Quick Navigation -->
        <div class="quick-nav">
            <a href="#what-is" class="btn outline"><i class="fas fa-info-circle"></i> What is COPD?</a>
            <a href="#symptoms" class="btn outline"><i class="fas fa-heartbeat"></i> Symptoms</a>
            <a href="#causes" class="btn outline"><i class="fas fa-search"></i> Causes</a>
            <a href="#treatment" class="btn outline"><i class="fas fa-medkit"></i> Treatment</a>
        </div>

        <!-- Information Cards -->
        <section id="what-is" class="info-card">
            <div class="card-header">
                <h2><i class="fas fa-info-circle"></i> What is COPD?</h2>
            </div>
            <div class="card-body">
                <p>Chronic Obstructive Pulmonary Disease (COPD) is a chronic inflammatory lung disease that causes obstructed airflow from the lungs. It's an umbrella term that includes emphysema and chronic bronchitis.</p>
                
                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-number">384M</div>
                        <p>People affected worldwide</p>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">3rd</div>
                        <p>Leading cause of death</p>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number">50%</div>
                        <p>Cases undiagnosed</p>
                    </div>
                </div>

                <div class="video-container">
                    <iframe src="https://www.youtube.com/embed/9k2JH3kUlOw" frameborder="0" allowfullscreen></iframe>
                </div>
            </div>
        </section>

        <section id="symptoms" class="info-card">
            <div class="card-header">
                <h2><i class="fas fa-heartbeat"></i> Symptoms</h2>
            </div>
            <div class="card-body">
                <div class="symptoms-grid">
                    <div class="symptom-item">
                        <i class="fas fa-wind"></i>
                        <h3>Shortness of Breath</h3>
                        <p>Especially during physical activities</p>
                    </div>
                    <div class="symptom-item">
                        <i class="fas fa-head-side-cough"></i>
                        <h3>Chronic Cough</h3>
                        <p>With or without mucus production</p>
                    </div>
                    <div class="symptom-item">
                        <i class="fas fa-tired"></i>
                        <h3>Fatigue</h3>
                        <p>Persistent lack of energy</p>
                    </div>
                    <div class="symptom-item">
                        <i class="fas fa-weight"></i>
                        <h3>Weight Loss</h3>
                        <p>In later stages of the disease</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="causes" class="info-card">
            <div class="card-header">
                <h2><i class="fas fa-search"></i> Causes & Risk Factors</h2>
            </div>
            <div class="card-body">
                <div class="causes-chart">
                    <div class="cause-item" style="--percentage: 80%">
                        <div class="cause-label">Smoking</div>
                        <div class="cause-bar"></div>
                        <div class="cause-percentage">80%</div>
                    </div>
                    <div class="cause-item" style="--percentage: 15%">
                        <div class="cause-label">Air Pollution</div>
                        <div class="cause-bar"></div>
                        <div class="cause-percentage">15%</div>
                    </div>
                    <div class="cause-item" style="--percentage: 5%">
                        <div class="cause-label">Genetics</div>
                        <div class="cause-bar"></div>
                        <div class="cause-percentage">5%</div>
                    </div>
                </div>
            </div>
        </section>

        <section id="treatment" class="info-card">
            <div class="card-header">
                <h2><i class="fas fa-medkit"></i> Treatment Options</h2>
            </div>
            <div class="card-body">
                <div class="treatment-options">
                    <div class="option">
                        <i class="fas fa-prescription-bottle-alt"></i>
                        <h3>Medications</h3>
                        <p>Bronchodilators, steroids, and antibiotics</p>
                    </div>
                    <div class="option">
                        <i class="fas fa-lungs"></i>
                        <h3>Oxygen Therapy</h3>
                        <p>For advanced cases with low oxygen levels</p>
                    </div>
                    <div class="option">
                        <i class="fas fa-dumbbell"></i>
                        <h3>Pulmonary Rehab</h3>
                        <p>Exercise and education program</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Prevention Section -->
        <section class="info-card prevention">
            <div class="card-header">
                <h2><i class="fas fa-shield-alt"></i> Prevention</h2>
            </div>
            <div class="card-body">
                <div class="prevention-tips">
                    <div class="tip">
                        <i class="fas fa-smoking-ban"></i>
                        <h3>Quit Smoking</h3>
                        <p>The most effective way to prevent COPD</p>
                    </div>
                    <div class="tip">
                        <i class="fas fa-wind"></i>
                        <h3>Avoid Pollutants</h3>
                        <p>Reduce exposure to dust and chemicals</p>
                    </div>
                    <div class="tip">
                        <i class="fas fa-syringe"></i>
                        <h3>Vaccinations</h3>
                        <p>Flu and pneumonia vaccines are essential</p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2025 BreatheWise. All rights reserved.</p>
            <div class="footer-links">
                <a href="../index.html">Home</a>
                <a href="../index.html#contact">Contact</a>
                <a href="#">Privacy Policy</a>
            </div>
        </div>
    </footer>
    <meta charset="utf-8">
            <title>BreatheWise Chatbot</title>
            <link rel="stylesheet" href="styles.css">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />
            <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@48,400,1,0" />
            <style>
                @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&display=swap');
                * {
                    margin: 0;
                    padding: 0;
                    box-sizing: border-box;
                    font-family: "Poppins", sans-serif;
                }
                body {
                    background: #E3F2FD;
                }
                .chatbot-toggler {
                    position: fixed;
                    bottom: 30px;
                    right: 35px;
                    outline: none;
                    border: none;
                    height: 50px;
                    width: 50px;
                    display: flex;
                    cursor: pointer;
                    align-items: center;
                    justify-content: center;
                    border-radius: 50%;
                    background: #4CAF50;
                    transition: all 0.2s ease;
                }
                body.show-chatbot .chatbot-toggler {
                    transform: rotate(90deg);
                }
                .chatbot-toggler span {
                    color: #fff;
                    position: absolute;
                }
                .chatbot-toggler span:last-child,
                body.show-chatbot .chatbot-toggler span:first-child  {
                    opacity: 0;
                }
                body.show-chatbot .chatbot-toggler span:last-child {
                    opacity: 1;
                }
                .chatbot {
                    position: fixed;
                    right: 35px;
                    bottom: 90px;
                    width: 420px;
                    background: #fff;
                    border-radius: 15px;
                    overflow: hidden;
                    opacity: 0;
                    pointer-events: none;
                    transform: scale(0.5);
                    transform-origin: bottom right;
                    box-shadow: 0 0 128px 0 rgba(0,0,0,0.1),
                                0 32px 64px -48px rgba(0,0,0,0.5);
                    transition: all 0.1s ease;
                }
                body.show-chatbot .chatbot {
                    opacity: 1;
                    pointer-events: auto;
                    transform: scale(1);
                }
                .chatbot header {
                    padding: 16px 0;
                    position: relative;
                    text-align: center;
                    color: #fff;
                    background: #4CAF50;
                    box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                }
                .chatbot header span {
                    position: absolute;
                    right: 15px;
                    top: 50%;
                    display: none;
                    cursor: pointer;
                    transform: translateY(-50%);
                }
                header h2 {
                    font-size: 1.4rem;
                }
                .chatbot .chatbox {
                    overflow-y: auto;
                    height: 510px;
                    padding: 30px 20px 100px;
                }
                .chatbot :where(.chatbox, textarea)::-webkit-scrollbar {
                    width: 6px;
                }
                .chatbot :where(.chatbox, textarea)::-webkit-scrollbar-track {
                    background: #fff;
                    border-radius: 25px;
                }
                .chatbot :where(.chatbox, textarea)::-webkit-scrollbar-thumb {
                    background: #ccc;
                    border-radius: 25px;
                }
                .chatbox .chat {
                    display: flex;
                    list-style: none;
                }
                .chatbox .outgoing {
                    margin: 20px 0;
                    justify-content: flex-end;
                }
                .chatbox .incoming span {
                    width: 32px;
                    height: 32px;
                    color: #fff;
                    cursor: default;
                    text-align: center;
                    line-height: 32px;
                    align-self: flex-end;
                    background: #4CAF50;
                    border-radius: 50%;
                    margin: 0 10px 7px 0;
                }
                .chatbox .chat p {
                    white-space: pre-wrap;
                    padding: 12px 16px;
                    border-radius: 10px 10px 0 10px;
                    max-width: 75%;
                    color: #fff;
                    font-size: 0.95rem;
                    background: #4CAF50;
                }
                .chatbox .incoming p {
                    border-radius: 10px 10px 10px 0;
                }
                .chatbox .chat p.error {
                    color: #721c24;
                    background: #f8d7da;
                }
                .chatbox .incoming p {
                    color: #000;
                    background: #f2f2f2;
                }
                .chatbot .chat-input {
                    display: flex;
                    gap: 5px;
                    position: absolute;
                    bottom: 0;
                    width: 100%;
                    background: #fff;
                    padding: 3px 20px;
                    border-top: 1px solid #ddd;
                }
                .chat-input textarea {
                    height: 55px;
                    width: 100%;
                    border: none;
                    outline: none;
                    resize: none;
                    max-height: 180px;
                    padding: 15px 15px 15px 0;
                    font-size: 0.95rem;
                }
                .chat-input span {
                    align-self: flex-end;
                    color: #4CAF50;
                    cursor: pointer;
                    height: 55px;
                    display: flex;
                    align-items: center;
                    visibility: hidden;
                    font-size: 1.35rem;
                }
                .chat-input textarea:valid ~ span {
                    visibility: visible;
                }
                @media (max-width: 490px) {
                    .chatbot-toggler {
                        right: 20px;
                        bottom: 20px;
                    }
                    .chatbot {
                        right: 0;
                        bottom: 0;
                        height: 100%;
                        border-radius: 0;
                        width: 100%;
                    }
                    .chatbot .chatbox {
                        height: 90%;
                        padding: 25px 15px 100px;
                    }
                    .chatbot .chat-input {
                        padding: 5px 15px;
                    }
                    .chatbot header span {
                        display: block;
                    }
                }
            </style>
            <script>
                document.addEventListener('DOMContentLoaded', () => {
                    const chatbotToggler = document.querySelector(".chatbot-toggler");
                    const closeBtn = document.querySelector(".close-btn");
                    const chatbox = document.querySelector(".chatbox");
                    const chatInput = document.querySelector(".chat-input textarea");
                    const sendChatBtn = document.querySelector(".chat-input span");
    
                    let userMessage = null;
                    const inputInitHeight = chatInput.scrollHeight;
    
                    const API_KEY = "AIzaSyB1OaBlUxardbcVAp7jQyh8kRvJ-gfjriI";
                    const API_URL =`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${API_KEY}`;
    
                    const createChatLi = (message, className) => {
                        const chatLi = document.createElement("li");
                        chatLi.classList.add("chat", className);
                        let chatContent = className === "outgoing" ? `<p></p>` : `<span class="material-symbols-outlined">message</span><p></p>`;
                        chatLi.innerHTML = chatContent;
                        chatLi.querySelector("p").textContent = message;
                        return chatLi;
                    }
    
                    const generateResponse = async (chatElement) => {
                        const messageElement = chatElement.querySelector("p");
                        
                        // Check if the message contains COPD-related keywords
                        const copdKeywords = ['copd', 'chronic obstructive pulmonary disease', 'emphysema', 'bronchitis', 'lung', 'breathing', 'respiratory', 'inhaler', 'breathe', 'oxygen', 'pulmonary'];
                        const containsCopdKeywords = copdKeywords.some(keyword => userMessage.toLowerCase().includes(keyword));
                        
                        if (!containsCopdKeywords) {
                            messageElement.textContent = "I apologize, but I can only assist with COPD-related questions. Please ask something about COPD, its symptoms, treatment, or management.";
                            return;
                        }

                        const requestOptions = {
                            method: "POST",
                            headers: { "Content-Type": "application/json" },
                            body: JSON.stringify({ 
                                contents: [{ 
                                    role: "user", 
                                    parts: [{ text: userMessage }] 
                                }] 
                            }),
                        }
    
                        try {
                            const response = await fetch(API_URL, requestOptions);
                            const data = await response.json();
                            if (!response.ok) throw new Error(data.error.message);
                        
                            messageElement.textContent = data.candidates[0].content.parts[0].text.replace(/\\(.?)\\*/g, '$1');
                        } catch (error) {
                            messageElement.classList.add("error");
                            messageElement.textContent = error.message;
                        } finally {
                            chatbox.scrollTo(0, chatbox.scrollHeight);
                        }
                    }
    
                    const handleChat = () => {
                        userMessage = chatInput.value.trim();
                        if (!userMessage) return;
    
                        chatInput.value = "";
                        chatInput.style.height = `${inputInitHeight}px`;
    
                        chatbox.appendChild(createChatLi(userMessage, "outgoing"));
                        chatbox.scrollTo(0, chatbox.scrollHeight);
    
                        setTimeout(() => {
                            const incomingChatLi = createChatLi("Thinking...", "incoming");
                            chatbox.appendChild(incomingChatLi);
                            chatbox.scrollTo(0, chatbox.scrollHeight);
                            generateResponse(incomingChatLi);
                        }, 600);
                    }
    
                    chatInput.addEventListener("input", () => {
                        chatInput.style.height = `${inputInitHeight}px`;
                        chatInput.style.height = `${chatInput.scrollHeight}px`;
                    });
    
                    chatInput.addEventListener("keydown", (e) => {
                        if (e.key === "Enter" && !e.shiftKey && window.innerWidth > 800) {
                            e.preventDefault();
                            handleChat();
                        }
                    });
    
                    sendChatBtn.addEventListener("click", handleChat);
                    closeBtn.addEventListener("click", () => document.body.classList.remove("show-chatbot"));
                    chatbotToggler.addEventListener("click", () => document.body.classList.toggle("show-chatbot"));
                });
            </script>
        </head>
        <body>
            <button class="chatbot-toggler">
                <span class="material-symbols-outlined">message</span>
                <span class="material-symbols-outlined">close</span>
            </button>
            <div class="chatbot">
                <header>
                    <h2>BreatheWise Assistant</h2>
                    <span class="close-btn material-symbols-outlined">close</span>
                </header>
                <ul class="chatbox">
                    <li class="chat incoming">
                        <span class="material-symbols-outlined">message</span>
                        <p>Hello! I'm your BreatheWise assistant. I can help you with COPD-related questions only. What would you like to know about COPD?</p>
                    </li>
                </ul>
                <div class="chat-input">
                    <textarea placeholder="Enter a message..." spellcheck="false" required></textarea>
                    <span id="send-btn" class="material-symbols-rounded">send</span>
                </div>
            </div>
    <script src="script.js"></script>
</body>
</html>